TRUE ~ category)) %>%
filter(category > 0) %>%
mutate(continent = ifelse((entity %in% "Africa") |
(entity %in% "Europe") |
(entity %in% "Asia") |
(entity %in% "North American") |
(entity %in% "South America") |
(entity %in% "Oceania"), "Yes", "No"))
View(soybean_clean)
soybean_clean <- soybean_use %>%
filter(between(year, 2000, 2013)) %>%
filter(!entity %in% c("Americas",
"Asia, Central",
"Australia & New Zealand",
"Central America",
"Eastern Africa",
"Eastern Europe",
"Europe, Western",
"European Union",
"Land Locked Developing Countries",
"Least Developed Countries",
"Low Income Food Deficit Countries",
"Micronesia (region)",
"Middle Africa",
"Net Food Importing Developing Countries",
"Northern Africa",
"Northern Europe",
"Serbia and Montenegro",
"Small island developing States",
"South Eastern Asia",
"Southern Africa",
"Southern Asia",
"Southern Europe",
"Western Africa",
"World")) %>%
mutate(
entity = case_when(
entity == "Sudan (former)" ~ "Sudan",
TRUE ~ entity)) %>%
select(-code, -year) %>%
group_by(entity) %>%
summarise_if(is.numeric, sum, na.rm = TRUE) %>%
pivot_longer(!entity, names_to = "category", values_to = "value") %>%
mutate(
category = case_when(
category == "human_food" ~ "Human Food",
category == "animal_feed" ~ "Animal Feed",
category == "processed" ~ "Processed",
TRUE ~ category)) %>%
filter(value > 0) %>%
mutate(continent = ifelse((entity %in% "Africa") |
(entity %in% "Europe") |
(entity %in% "Asia") |
(entity %in% "North American") |
(entity %in% "South America") |
(entity %in% "Oceania"), "Yes", "No"))
View(soybean_clean)
View(soybean_use)
View(soybean_clean)
View(soybean_use)
View(soybean_clean)
soybean_clean %>%
filter(content == "Yes")
soybean_clean %>%
filter(content = "Yes")
soybean_clean %>%
filter(continent = "Yes")
soybean_clean %>%
filter(continent == "Yes")
setwd("C:/Users/cshog/Dropbox/CHRISTIAN/Academic Work/Github/-TidyTuesday")
library(here)
View(soybean_clean)
data <- reshape2::melt(Titanic)
data <- gather_set_data(data, 1:4)
library(ggforce)
data <- gather_set_data(data, 1:4)
ggplot(data, aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = Sex), alpha = 0.3, axis.width = 0.1) +
geom_parallel_sets_axes(axis.width = 0.1) +
geom_parallel_sets_labels(colour = 'white')
View(data)
soybean_clean %>%
filter(continent == "Yes") %>%
ggplot(aes(processed, split = entity, value = value))
soybean_clean %>%
filter(continent == "Yes") %>%
ggplot(aes(category, split = entity, value = value))
soybean_clean %>%
filter(continent == "Yes") %>%
ggplot(aes(category, split = category, value = value))
soybean_clean %>%
filter(continent == "Yes") %>%
ggplot(aes(category, split = entity, value = value))
soybean_clean %>%
filter(continent == "Yes") %>%
ggplot(aes(entity, split = entity, value = value))
soybean_clean %>%
filter(continent == "Yes")
soybean_clean %>%
filter(continent == "Yes") %>%
ggplot(aes(identity, id = category, split = entity, value = value))
soybean_clean %>%
filter(continent == "Yes") %>%
ggplot(aes(id = category, split = entity, value = value))
View(data)
soybean_clean %>% gather_set_data(1:2)
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = entity, split = y, value = value))
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = entity, split = y, value = value)) %>%
geom_parallel_sets()
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = entity, split = y, value = value)) +
geom_parallel_sets()
soybean_clean %>% gather_set_data(1:2)
d <- soybean_clean %>% gather_set_data(1:2)
View(d)
View(d)
d <- soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = category, split = y, value = value)) +
geom_parallel_sets()
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = category, split = y, value = value)) +
geom_parallel_sets()
soybean_clean <- soybean_use %>%
filter(between(year, 2000, 2013)) %>%
filter(!entity %in% c("Americas",
"Asia, Central",
"Australia & New Zealand",
"Central America",
"Eastern Africa",
"Eastern Europe",
"Europe, Western",
"European Union",
"Land Locked Developing Countries",
"Least Developed Countries",
"Low Income Food Deficit Countries",
"Micronesia (region)",
"Middle Africa",
"Net Food Importing Developing Countries",
"Northern Africa",
"Northern Europe",
"Serbia and Montenegro",
"Small island developing States",
"South Eastern Asia",
"Southern Africa",
"Southern Asia",
"Southern Europe",
"Western Africa",
"World")) %>%
mutate(
entity = case_when(
entity == "Sudan (former)" ~ "Sudan",
TRUE ~ entity)) %>%
select(-code, -year) %>%
group_by(entity) %>%
summarise_if(is.numeric, sum, na.rm = TRUE) %>%
pivot_longer(!entity, names_to = "category", values_to = "value") %>%
mutate(
category = case_when(
category == "human_food" ~ "Human Food",
category == "animal_feed" ~ "Animal Feed",
category == "processed" ~ "Processed",
TRUE ~ category)) %>%
mutate(ID = row_number()) %>%
filter(value > 0) %>%
mutate(continent = ifelse((entity %in% "Africa") |
(entity %in% "Europe") |
(entity %in% "Asia") |
(entity %in% "North American") |
(entity %in% "South America") |
(entity %in% "Oceania"), "Yes", "No"))
View(soybean_clean)
View(soybean_use)
View(soybean_clean)
View(soybean_clean)
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets()
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(y, id = id, split = x, value = value)) +
geom_parallel_sets()
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets()
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets() +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = continent)) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category)) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category)) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category, alpha = 0.3, axis.width = 0.1)) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category), alpha = 0.3, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category), alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category), strength = 0.5, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category), strength = 0.9, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category), strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = continent),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = entity),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = 1)) +
geom_parallel_sets(aes(fill = entity),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = 1)) +
geom_parallel_sets(aes(fill = entity),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = 1)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal()
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = 1)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal() +
theme(legend.position = "none")
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal() +
theme(legend.position = "none")
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels() +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels(angle = 90) +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels(angle = 180) +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels(angle = 360) +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
d <- soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No")
View(d)
soybean_clean <- soybean_use %>%
filter(between(year, 2000, 2013)) %>%
filter(!entity %in% c("Americas",
"Asia, Central",
"Australia & New Zealand",
"Central America",
"Eastern Africa",
"Eastern Europe",
"Europe, Western",
"European Union",
"Land Locked Developing Countries",
"Least Developed Countries",
"Low Income Food Deficit Countries",
"Micronesia (region)",
"Middle Africa",
"Net Food Importing Developing Countries",
"Northern Africa",
"Northern Europe",
"Serbia and Montenegro",
"Small island developing States",
"South Eastern Asia",
"Southern Africa",
"Southern Asia",
"Southern Europe",
"Western Africa",
"World")) %>%
mutate(
entity = case_when(
entity == "Sudan (former)" ~ "Sudan",
entity == "North American" ~ "North America",
TRUE ~ entity)) %>%
select(-code, -year) %>%
group_by(entity) %>%
summarise_if(is.numeric, sum, na.rm = TRUE) %>%
pivot_longer(!entity, names_to = "category", values_to = "value") %>%
mutate(
category = case_when(
category == "human_food" ~ "Human Food",
category == "animal_feed" ~ "Animal Feed",
category == "processed" ~ "Processed",
TRUE ~ category)) %>%
mutate(ID = row_number()) %>%
filter(value > 0) %>%
mutate(continent = ifelse((entity %in% "Africa") |
(entity %in% "Europe") |
(entity %in% "Asia") |
(entity %in% "North America") |
(entity %in% "South America") |
(entity %in% "Oceania"), "Yes", "No"))
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "No") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels(angle = 360) +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
ggsave("images/Week_15_Deforestation.png", plot = last_plot(), width = 200, height = 400, units = "mm", dpi = 400)
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels(angle = 360) +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
soybean_clean <- soybean_use %>%
filter(between(year, 2000, 2013)) %>%
filter(!entity %in% c("Americas",
"Asia, Central",
"Australia & New Zealand",
"Central America",
"Eastern Africa",
"Eastern Europe",
"Europe, Western",
"European Union",
"Land Locked Developing Countries",
"Least Developed Countries",
"Low Income Food Deficit Countries",
"Micronesia (region)",
"Middle Africa",
"Net Food Importing Developing Countries",
"Northern Africa",
"Northern Europe",
"Serbia and Montenegro",
"Small island developing States",
"South Eastern Asia",
"Southern Africa",
"Southern Asia",
"Southern Europe",
"Western Africa",
"World")) %>%
mutate(
entity = case_when(
entity == "Sudan (former)" ~ "Sudan",
entity == "Northern America" ~ "North America",
TRUE ~ entity)) %>%
select(-code, -year) %>%
group_by(entity) %>%
summarise_if(is.numeric, sum, na.rm = TRUE) %>%
pivot_longer(!entity, names_to = "category", values_to = "value") %>%
mutate(
category = case_when(
category == "human_food" ~ "Human Food",
category == "animal_feed" ~ "Animal Feed",
category == "processed" ~ "Processed",
TRUE ~ category)) %>%
mutate(ID = row_number()) %>%
filter(value > 0) %>%
mutate(continent = ifelse((entity %in% "Africa") |
(entity %in% "Europe") |
(entity %in% "Asia") |
(entity %in% "North America") |
(entity %in% "South America") |
(entity %in% "Oceania"), "Yes", "No"))
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels(angle = 360) +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
soybean_clean %>% gather_set_data(1:2) %>%
filter(continent == "Yes") %>%
ggplot(aes(x, id = id, split = y, value = value)) +
geom_parallel_sets(aes(fill = category),strength = 0.2, alpha = 0.8, axis.width = 0.1) +
geom_parallel_sets_labels() +
theme_minimal() +
theme(legend.position = "none",
axis.text.x = element_blank(),
axis.text.y = element_blank())
.Primitive("is.numeric")
soybean_clean <- soybean_use %>%
filter(between(year, 2000, 2013)) %>%
filter(!entity %in% c("Americas",
"Asia, Central",
"Australia & New Zealand",
"Central America",
"Eastern Africa",
"Eastern Europe",
"Europe, Western",
"European Union",
"Land Locked Developing Countries",
"Least Developed Countries",
"Low Income Food Deficit Countries",
"Micronesia (region)",
"Middle Africa",
"Net Food Importing Developing Countries",
"Northern Africa",
"Northern Europe",
"Serbia and Montenegro",
"Small island developing States",
"South Eastern Asia",
"Southern Africa",
"Southern Asia",
"Southern Europe",
"Western Africa",
"World")) %>%
mutate(
entity = case_when(
entity == "Sudan (former)" ~ "Sudan",
entity == "Northern America" ~ "North America",
TRUE ~ entity)) %>%
select(-code, -year) %>%
group_by(entity) %>%
summarise_if(is.numeric, sum, na.rm = TRUE) %>%
pivot_longer(!entity, names_to = "category", values_to = "value") %>%
mutate(
category = case_when(
category == "human_food" ~ "Human Food",
category == "animal_feed" ~ "Animal Feed",
category == "processed" ~ "Processed",
TRUE ~ category)) %>%
mutate(ID = row_number()) %>%
filter(value > 0) %>%
mutate(continent = ifelse((entity %in% "Africa") |
(entity %in% "Europe") |
(entity %in% "Asia") |
(entity %in% "North America") |
(entity %in% "South America") |
(entity %in% "Oceania"), "Yes", "No"))
View(soybean_clean)
